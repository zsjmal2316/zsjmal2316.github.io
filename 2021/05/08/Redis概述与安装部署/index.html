<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Redis概述与安装部署-1"><meta name="keywords" content="Redis"><meta name="author" content="Inaction"><meta name="copyright" content="Inaction"><title>Redis概述与安装部署-1 | Inaction's Blog</title><link rel="shortcut icon" href="/imdadul-hussain-u_oLPS_ZYSc-unsplash.jpg"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?12b421fdad87d1edf2305ccb7229d2c1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'G-8RMJ1F8ETC', 'auto');
ga('send', 'pageview');</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.3.0'
} </script><meta name="generator" content="Hexo 5.3.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis"><span class="toc-number">1.</span> <span class="toc-text">Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">Redis概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.1.</span> <span class="toc-text">Redis应用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2"><span class="toc-number">1.2.</span> <span class="toc-text">Redis安装部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.1.</span> <span class="toc-text">Docker方式安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.2.</span> <span class="toc-text">二进制编译安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87redis%E8%87%AA%E5%B8%A6%E7%9A%84%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83"><span class="toc-number">1.2.3.</span> <span class="toc-text">通过redis自带的脚本安装生产环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.2.4.</span> <span class="toc-text">启动与关闭服务</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/imdadul-hussain-u_oLPS_ZYSc-unsplash.jpg"></div><div class="author-info__name text-center">Inaction</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">54</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">19</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">13</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Friend Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="http://www.ji4n.cn/">Jen</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(img/wuwei.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Inaction's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">Redis概述与安装部署-1</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-05-08</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Linux/">Linux</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Linux/Redis/">Redis</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="Redis概述"><a href="#Redis概述" class="headerlink" title="Redis概述"></a>Redis概述</h2><p>Redis由意大利人Salvatore Sanfilippo（网名 Antirez）开发，Redis是互联网技术领域使用最为广泛的存储中间件，它是<code>Re</code>mote <code>Di</code>ctionary <code>S</code>ervice（远程字典服务）的首字母缩写。</p>
<p>Redis是一种基于键值对的NoSQL数据库，它可以用作数据库、缓存和消息中间件。并支持多种类型数据结构，如：string、hash、list、set和zset等多种数据结构和算法按组成</p>
<p>Redis会将所有的数据放入内存中，所以它的读写性能非常的快，可以达到秒级10万的请求，除了超高的性能，Redis还会降内存中的数据利用快照和日志的形式保存到磁盘上，保证数据的持久性</p>
<h3 id="Redis应用场景"><a href="#Redis应用场景" class="headerlink" title="Redis应用场景"></a>Redis应用场景</h3><p>Redis支持多种解决方案，如物联网、电子商务实时计量和社交应用程序等。如常见的用例有</p>
<ul>
<li>消息代理</li>
<li>队列管理</li>
<li>实时分析</li>
<li>缓存用户行为历史，过滤恶意行为</li>
<li>记录帖子各种用户信息（点赞数、评论数和点击数等…）</li>
<li>排行榜</li>
<li>…</li>
</ul>
<h2 id="Redis安装部署"><a href="#Redis安装部署" class="headerlink" title="Redis安装部署"></a>Redis安装部署</h2><ul>
<li>Docker安装</li>
<li>二进制安装</li>
</ul>
<h3 id="Docker方式安装"><a href="#Docker方式安装" class="headerlink" title="Docker方式安装"></a>Docker方式安装</h3><p><strong>拉去Redis镜像</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docket pull redis</span><br></pre></td></tr></table></figure>
<p><strong>运行Redis容器</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docket run --name myredis -d -p6379:6379 redis</span><br></pre></td></tr></table></figure>
<p><strong>执行容器中的 redis_cli，可以直接使用命令行操作</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker exec -it</span><br></pre></td></tr></table></figure>
<h3 id="二进制编译安装"><a href="#二进制编译安装" class="headerlink" title="二进制编译安装"></a>二进制编译安装</h3><p><strong>目录规划</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ /server/soft                                           //各式软件存放的目录</span><br><span class="line">$ /opt/redis_cluster/redis_&#123;PORT&#125;/&#123;conf,logs,pid&#125;        //redis安装目录</span><br><span class="line">$ /data/redis_cluster/redis_&#123;PORT&#125;/redis_&#123;PORT&#125;.rdb      //redis数据目录</span><br></pre></td></tr></table></figure>
<p><strong>创建目录</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p /server/soft</span><br><span class="line">$ mkdir -p /opt/redis_cluster/redis_6379/&#123;conf,logs,pid&#125;</span><br><span class="line">$ mkdir -p /data/redis_cluster/redis_6379</span><br></pre></td></tr></table></figure>
<p><strong>下载并解压redis包到路径</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd /server/soft</span><br><span class="line">$ wget http://download.redis.io/releases/redis-6.0.7.tar.gz</span><br><span class="line">$ tar xf redis-6.0.6.tar.gz -C /opt/redis_cluster/</span><br></pre></td></tr></table></figure>
<p><strong>对解压的包做软连接（可选）</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ln -s /opt/redis_cluster/redis-6.0.7/ /opt/redis_cluster/redis</span><br><span class="line">$ ll /opt/redis_cluster</span><br><span class="line"><span class="selector-tag">lrwxrwxrwx</span> 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span>   12 <span class="selector-tag">Oct</span>  3 16<span class="selector-pseudo">:40</span> <span class="selector-tag">redis</span> <span class="selector-tag">-</span>&gt; <span class="selector-tag">redis-6</span>.0.7/</span><br></pre></td></tr></table></figure>
<p><strong>安装编译需要的软件包，然后进行编译</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ yum install –y gcc gcc-c++ make -y</span><br><span class="line">$ cd /opt/redis_cluster/redis</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure>
<p>如果CentOS出现以下问题，请先检查gcc的版本是否低于5，如果是请先升级，可以使用以下命令（这种问题一般出现在Centos7，或是以上的版本）：</p>
<p><img src="https://my-oss-image.oss-cn-guangzhou.aliyuncs.com/redis-pages/image-20210312114331583.png"></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ yum install centos-release-scl</span><br><span class="line">$ yum install devtoolset-7-gcc*</span><br><span class="line">$ scl enable devtoolset-7 bash</span><br><span class="line">$ make distclean &amp;&amp; make             //distclean是清除上述make执行的缓存</span><br></pre></td></tr></table></figure>
<p><strong>make install安装</strong></p>
<p>默认使用make install，它自动安装到/usr/local/bin，安装之后，可以直接在任何位置上调用redis的命令</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ make install</span><br><span class="line">$ which redis-cli</span><br><span class="line">/<span class="selector-tag">usr</span>/<span class="selector-tag">local</span>/<span class="selector-tag">bin</span>/<span class="selector-tag">redis-cli</span></span><br></pre></td></tr></table></figure>
<p>也可以自定义二进制命令安装，但是需要自己配置环境变量</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ make install PREFIX=/opt/redis-6379/</span><br><span class="line">$ cd /opt/redis-6379/bin</span><br><span class="line">$ ll</span><br><span class="line"><span class="selector-tag">-rwxr-xr-x</span>. 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 4794752 <span class="selector-tag">Mar</span> 12 11<span class="selector-pseudo">:50</span> <span class="selector-tag">redis-benchmark</span></span><br><span class="line"><span class="selector-tag">-rwxr-xr-x</span>. 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 9033544 <span class="selector-tag">Mar</span> 12 11<span class="selector-pseudo">:50</span> <span class="selector-tag">redis-check-aof</span></span><br><span class="line"><span class="selector-tag">-rwxr-xr-x</span>. 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 9033544 <span class="selector-tag">Mar</span> 12 11<span class="selector-pseudo">:50</span> <span class="selector-tag">redis-check-rdb</span></span><br><span class="line"><span class="selector-tag">-rwxr-xr-x</span>. 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 5044496 <span class="selector-tag">Mar</span> 12 11<span class="selector-pseudo">:50</span> <span class="selector-tag">redis-cli</span></span><br><span class="line"><span class="selector-tag">lrwxrwxrwx</span>. 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span>      12 <span class="selector-tag">Mar</span> 12 11<span class="selector-pseudo">:50</span> <span class="selector-tag">redis-sentinel</span> <span class="selector-tag">-</span>&gt; <span class="selector-tag">redis-server</span></span><br><span class="line"><span class="selector-tag">-rwxr-xr-x</span>. 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 9033544 <span class="selector-tag">Mar</span> 12 11<span class="selector-pseudo">:50</span> <span class="selector-tag">redis-server</span></span><br><span class="line"></span><br><span class="line">$ vi /etc/profile</span><br><span class="line">export REDIS_HOME=/opt/redis-6/</span><br><span class="line">export PAHT=$PAHT:REDIS_HOME/bin</span><br><span class="line">$ source /etc/profile</span><br></pre></td></tr></table></figure>
<h3 id="通过redis自带的脚本安装生产环境"><a href="#通过redis自带的脚本安装生产环境" class="headerlink" title="通过redis自带的脚本安装生产环境"></a>通过redis自带的脚本安装生产环境</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ cd /opt/redis_cluster/redis/utils/</span><br><span class="line">$ ./install_server.sh </span><br><span class="line"><span class="selector-tag">Welcome</span> <span class="selector-tag">to</span> <span class="selector-tag">the</span> <span class="selector-tag">redis</span> <span class="selector-tag">service</span> <span class="selector-tag">installer</span></span><br><span class="line"><span class="selector-tag">This</span> <span class="selector-tag">script</span> <span class="selector-tag">will</span> <span class="selector-tag">help</span> <span class="selector-tag">you</span> <span class="selector-tag">easily</span> <span class="selector-tag">set</span> <span class="selector-tag">up</span> <span class="selector-tag">a</span> <span class="selector-tag">running</span> <span class="selector-tag">redis</span> <span class="selector-tag">server</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">This</span> <span class="selector-tag">systems</span> <span class="selector-tag">seems</span> <span class="selector-tag">to</span> <span class="selector-tag">use</span> <span class="selector-tag">systemd</span>.</span><br><span class="line"><span class="selector-tag">Please</span> <span class="selector-tag">take</span> <span class="selector-tag">a</span> <span class="selector-tag">look</span> <span class="selector-tag">at</span> <span class="selector-tag">the</span> <span class="selector-tag">provided</span> <span class="selector-tag">example</span> <span class="selector-tag">service</span> <span class="selector-tag">unit</span> <span class="selector-tag">files</span> <span class="selector-tag">in</span> <span class="selector-tag">this</span> <span class="selector-tag">directory</span>, <span class="selector-tag">and</span> <span class="selector-tag">adapt</span> <span class="selector-tag">and</span> <span class="selector-tag">install</span> <span class="selector-tag">them</span>. <span class="selector-tag">Sorry</span>!</span><br></pre></td></tr></table></figure>
<p>执行脚本之后，会出现以上错误。我们需要修改脚本，注释一些代码。因为是使用centos7版本，启动是使用systemd，所以不能执行，只能将代码注释（如果是Centos6就没有这种问题）。操作如下</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ vim install_server.sh </span><br><span class="line"><span class="selector-id">#bail</span> <span class="selector-tag">if</span> <span class="selector-tag">this</span> <span class="selector-tag">system</span> <span class="selector-tag">is</span> <span class="selector-tag">managed</span> <span class="selector-tag">by</span> <span class="selector-tag">systemd</span></span><br><span class="line">#_pid_1_exe=&quot;$(readlink -f /proc/1/exe)&quot;</span><br><span class="line"><span class="selector-id">#if</span> <span class="selector-attr">[ <span class="string">&quot;$&#123;_pid_1_exe##*/&#125;&quot;</span> = systemd ]</span></span><br><span class="line"><span class="selector-id">#then</span></span><br><span class="line">#       <span class="selector-tag">echo</span> &quot;<span class="selector-tag">This</span> <span class="selector-tag">systems</span> <span class="selector-tag">seems</span> <span class="selector-tag">to</span> <span class="selector-tag">use</span> <span class="selector-tag">systemd</span>.&quot;</span><br><span class="line">#       <span class="selector-tag">echo</span> &quot;<span class="selector-tag">Please</span> <span class="selector-tag">take</span> <span class="selector-tag">a</span> <span class="selector-tag">look</span> <span class="selector-tag">at</span> <span class="selector-tag">the</span> <span class="selector-tag">provided</span> <span class="selector-tag">example</span> <span class="selector-tag">service</span> <span class="selector-tag">unit</span> <span class="selector-tag">files</span> <span class="selector-tag">in</span> <span class="selector-tag">this</span> <span class="selector-tag">directory</span>, <span class="selector-tag">and</span> <span class="selector-tag">adapt</span> <span class="selector-tag">and</span> <span class="selector-tag">install</span> <span class="selector-tag">them</span>. <span class="selector-tag">Sorry</span>!&quot;</span><br><span class="line">#       <span class="selector-tag">exit</span> 1</span><br><span class="line"><span class="selector-id">#fi</span></span><br><span class="line"><span class="selector-id">#unset</span> _<span class="selector-tag">pid_1_exe</span></span><br></pre></td></tr></table></figure>
<p>执行脚本，一个物理机可以有多个redis实例（进程），通过port区分，可以使用./install_server.sh脚本做出更多的redis节点。如6380,6381等等</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ ./install_server.sh </span><br><span class="line"><span class="selector-tag">Welcome</span> <span class="selector-tag">to</span> <span class="selector-tag">the</span> <span class="selector-tag">redis</span> <span class="selector-tag">service</span> <span class="selector-tag">installer</span></span><br><span class="line"><span class="selector-tag">This</span> <span class="selector-tag">script</span> <span class="selector-tag">will</span> <span class="selector-tag">help</span> <span class="selector-tag">you</span> <span class="selector-tag">easily</span> <span class="selector-tag">set</span> <span class="selector-tag">up</span> <span class="selector-tag">a</span> <span class="selector-tag">running</span> <span class="selector-tag">redis</span> <span class="selector-tag">server</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">Please</span> <span class="selector-tag">select</span> <span class="selector-tag">the</span> <span class="selector-tag">redis</span> <span class="selector-tag">port</span> <span class="selector-tag">for</span> <span class="selector-tag">this</span> <span class="selector-tag">instance</span>: <span class="selector-attr">[6379]</span> //选择的端口号</span><br><span class="line"><span class="selector-tag">Selecting</span> <span class="selector-tag">default</span>: 6379</span><br><span class="line"><span class="selector-tag">Please</span> <span class="selector-tag">select</span> <span class="selector-tag">the</span> <span class="selector-tag">redis</span> <span class="selector-tag">config</span> <span class="selector-tag">file</span> <span class="selector-tag">name</span> <span class="selector-attr">[/etc/redis/6379.conf]</span> /<span class="selector-tag">opt</span>/<span class="selector-tag">redis_cluster</span>/<span class="selector-tag">redis</span>/<span class="selector-tag">conf</span>/<span class="selector-tag">redis</span>.6379<span class="selector-class">.conf</span></span><br><span class="line">//选择配置文件路径，可自行定制</span><br><span class="line"><span class="selector-tag">Please</span> <span class="selector-tag">select</span> <span class="selector-tag">the</span> <span class="selector-tag">redis</span> <span class="selector-tag">log</span> <span class="selector-tag">file</span> <span class="selector-tag">name</span> <span class="selector-attr">[/var/log/redis_6379.log]</span> /<span class="selector-tag">opt</span>/<span class="selector-tag">redis_cluster</span>/<span class="selector-tag">redis</span>/<span class="selector-tag">log</span>/<span class="selector-tag">redis_6379</span><span class="selector-class">.log</span></span><br><span class="line">//<span class="selector-tag">redis</span>日志路径，可自行定制</span><br><span class="line"><span class="selector-tag">Selected</span> <span class="selector-tag">default</span> <span class="selector-tag">-</span> /<span class="selector-tag">var</span>/<span class="selector-tag">log</span>/<span class="selector-tag">redis_6379</span><span class="selector-class">.log</span></span><br><span class="line"><span class="selector-tag">Please</span> <span class="selector-tag">select</span> <span class="selector-tag">the</span> <span class="selector-tag">data</span> <span class="selector-tag">directory</span> <span class="selector-tag">for</span> <span class="selector-tag">this</span> <span class="selector-tag">instance</span> <span class="selector-attr">[/var/lib/redis/6379]</span> /<span class="selector-tag">data</span>/<span class="selector-tag">redis_cluster</span>/<span class="selector-tag">redis_6379</span></span><br><span class="line">//<span class="selector-tag">redis</span>数据路径（持久化作用）</span><br><span class="line"><span class="selector-tag">Please</span> <span class="selector-tag">select</span> <span class="selector-tag">the</span> <span class="selector-tag">redis</span> <span class="selector-tag">executable</span> <span class="selector-tag">path</span> <span class="selector-attr">[/usr/local/bin/redis-server]</span> </span><br><span class="line"><span class="selector-tag">Selected</span> <span class="selector-tag">config</span>:</span><br><span class="line"><span class="selector-tag">Port</span>           : 6379</span><br><span class="line"><span class="selector-tag">Config</span> <span class="selector-tag">file</span>    : /<span class="selector-tag">opt</span>/<span class="selector-tag">redis_cluster</span>/<span class="selector-tag">redis</span>/<span class="selector-tag">conf</span>/<span class="selector-tag">redis</span>.6379<span class="selector-class">.conf</span></span><br><span class="line"><span class="selector-tag">Log</span> <span class="selector-tag">file</span>       : /<span class="selector-tag">opt</span>/<span class="selector-tag">redis_cluster</span>/<span class="selector-tag">redis</span>/<span class="selector-tag">log</span>/<span class="selector-tag">redis_6379</span><span class="selector-class">.log</span></span><br><span class="line"><span class="selector-tag">Data</span> <span class="selector-tag">dir</span>       : /<span class="selector-tag">data</span>/<span class="selector-tag">redis_cluster</span>/<span class="selector-tag">redis_6379</span></span><br><span class="line"><span class="selector-tag">Executable</span>     : /<span class="selector-tag">usr</span>/<span class="selector-tag">local</span>/<span class="selector-tag">bin</span>/<span class="selector-tag">redis-server</span></span><br><span class="line"><span class="selector-tag">Cli</span> <span class="selector-tag">Executable</span> : /<span class="selector-tag">usr</span>/<span class="selector-tag">local</span>/<span class="selector-tag">bin</span>/<span class="selector-tag">redis-cli</span></span><br><span class="line"><span class="selector-tag">Is</span> <span class="selector-tag">this</span> <span class="selector-tag">ok</span>? <span class="selector-tag">Then</span> <span class="selector-tag">press</span> <span class="selector-tag">ENTER</span> <span class="selector-tag">to</span> <span class="selector-tag">go</span> <span class="selector-tag">on</span> <span class="selector-tag">or</span> <span class="selector-tag">Ctrl-C</span> <span class="selector-tag">to</span> <span class="selector-tag">abort</span>.</span><br><span class="line">Copied /tmp/6379.conf =&gt; /etc/init.d/redis_6379</span><br><span class="line"><span class="selector-tag">Installing</span> <span class="selector-tag">service</span>...</span><br><span class="line"><span class="selector-tag">Successfully</span> <span class="selector-tag">added</span> <span class="selector-tag">to</span> <span class="selector-tag">chkconfig</span>!</span><br><span class="line"><span class="selector-tag">Successfully</span> <span class="selector-tag">added</span> <span class="selector-tag">to</span> <span class="selector-tag">runlevels</span> 345!</span><br><span class="line"><span class="selector-tag">Starting</span> <span class="selector-tag">Redis</span> <span class="selector-tag">server</span>...</span><br><span class="line"><span class="selector-tag">Installation</span> <span class="selector-tag">successful</span>!</span><br></pre></td></tr></table></figure>
<p>执行完脚本之后，脚本会自行开启redis，可以使用此方法启动和关闭</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/<span class="selector-tag">etc</span>/<span class="selector-tag">init</span><span class="selector-class">.d</span>/<span class="selector-tag">redis_6379</span> <span class="selector-tag">start</span></span><br><span class="line">/<span class="selector-tag">etc</span>/<span class="selector-tag">init</span><span class="selector-class">.d</span>/<span class="selector-tag">redis_6379</span> <span class="selector-tag">stop</span></span><br></pre></td></tr></table></figure>
<p>测试登录</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ redis-server /opt/redis_cluster/redis_6379/conf/redis_6379.conf</span><br><span class="line">$ redis-cli</span><br><span class="line">$ 127.0.0.1:6379&gt; </span><br><span class="line">$ 127.0.0.1:6379&gt; quit</span><br></pre></td></tr></table></figure>
<h3 id="启动与关闭服务"><a href="#启动与关闭服务" class="headerlink" title="启动与关闭服务"></a>启动与关闭服务</h3><p><strong>启动服务</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ /etc/init.d/redis start</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line">$ redis-server /opt/redis_cluster/redis_6379/conf/redis_6379.conf</span><br></pre></td></tr></table></figure>
<p><strong>查看进程</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ps -ef|grep redis</span><br><span class="line"><span class="selector-tag">root</span>       2379      1  0 22<span class="selector-pseudo">:13</span> ?        00<span class="selector-pseudo">:00</span><span class="selector-pseudo">:00</span> <span class="selector-tag">redis-server</span> 10.0.0.55<span class="selector-pseudo">:6379</span></span><br></pre></td></tr></table></figure>
<p><strong>关闭redis</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ /etc/init.d/redis stop</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line">$ redis-cli -h 10.0.0.40 shutdown</span><br></pre></td></tr></table></figure>
<p><strong>连接服务</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli -h 10.0.0.40</span><br><span class="line">10.0.0.40<span class="selector-pseudo">:6379</span>&gt; </span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Inaction</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://myboke.ink/2021/05/08/Redis概述与安装部署/">https://myboke.ink/2021/05/08/Redis概述与安装部署/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Redis/">Redis</a></div><div class="social-share pull-right"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/05/08/Redis%E5%B8%B8%E7%94%A8%E7%BB%93%E6%9E%84%E7%B1%BB%E5%9E%8B-2%EF%BC%88%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3%EF%BC%89/"><i class="fa fa-chevron-left">  </i><span>Redis常用结构类型-2（详细讲解）</span></a></div><div class="next-post pull-right"><a href="/2021/04/29/hexo-admin-web%E7%BC%96%E8%BE%91%E5%99%A8%EF%BC%89/"><span>hexo-admin(web管理界面编辑器)</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '6cea6a646bff1a0d5f5b',
  clientSecret: '6e9ef08f31f505d416bc0afe2d304808e9063627',
  repo: 'zsjmal2316.github.io',
  owner: 'zsjmal2316',
  admin: 'zsjmal2316',
  id: md5(decodeURI(location.pathname)),
  language: 'en'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(img/wuwei.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2021 By Inaction</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">粤ICP备20067869号</a>!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/local-search.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="120" alpha="0.3" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>